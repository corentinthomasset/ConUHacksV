{"remainingRequest":"/Users/corentin/Desktop/ui/node_modules/babel-loader/lib/index.js!/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/corentin/Desktop/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/corentin/Desktop/ui/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/corentin/Desktop/ui/src/views/Home.vue","mtime":1580046550442},{"path":"/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gQCBpcyBhbiBhbGlhcyB0byAvc3JjCmltcG9ydCBVc2VyIGZyb20gIi4uL3N0b3JlL01vZGVscy9Vc2VyIjsKaW1wb3J0IE92ZXJ2aWV3Q2FyZCBmcm9tICIuLi9jb21wb25lbnRzL092ZXJ2aWV3Q2FyZCI7CmltcG9ydCBCb3ggZnJvbSAiLi4vc3RvcmUvTW9kZWxzL0JveCI7CmltcG9ydCBBbGVydCBmcm9tICIuLi9zdG9yZS9Nb2RlbHMvQWxlcnQiOwppbXBvcnQgQWxlcnRDYXJkIGZyb20gIi4uL2NvbXBvbmVudHMvQWxlcnRDYXJkIjsKaW1wb3J0IEJveENhcmQgZnJvbSAiLi4vY29tcG9uZW50cy9Cb3hDYXJkIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdob21lJywKICBjb21wb25lbnRzOiB7CiAgICBCb3hDYXJkOiBCb3hDYXJkLAogICAgQWxlcnRDYXJkOiBBbGVydENhcmQsCiAgICBPdmVydmlld0NhcmQ6IE92ZXJ2aWV3Q2FyZAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vdzogMAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKCkgewogICAgICByZXR1cm4gVXNlci5xdWVyeSgpLndpdGgoJ2JveGVzJykuYWxsKClbMF07CiAgICB9LAogICAgbGFzdENoZWNrOiBmdW5jdGlvbiBsYXN0Q2hlY2soKSB7CiAgICAgIHZhciBib3ggPSBCb3gucXVlcnkoKS53aGVyZSgnb3duZXJFbWFpbCcsIHRoaXMudXNlci5lbWFpbCkub3JkZXJCeSgnbGFzdENoZWNrZWQnLCAnZGVzYycpLmdldCgpWzBdOwoKICAgICAgaWYgKGJveCkgewogICAgICAgIHJldHVybiBib3gubGFzdENoZWNrZWQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgIH0sCiAgICBib3hlczogZnVuY3Rpb24gYm94ZXMoKSB7CiAgICAgIHJldHVybiBCb3gucXVlcnkoKS53aGVyZSgnb3duZXJFbWFpbCcsIHRoaXMudXNlci5lbWFpbCkuYWxsKCk7CiAgICB9LAogICAgcmVjYXA6IGZ1bmN0aW9uIHJlY2FwKCkgewogICAgICB2YXIgZmxhZ2dlZCA9IEJveC5xdWVyeSgpLndoZXJlKCdmbGFnJywgdHJ1ZSkuY291bnQoKTsKCiAgICAgIGlmIChmbGFnZ2VkID09PSAxKSB7CiAgICAgICAgcmV0dXJuICIxIGJveCBuZWVkcyB0byBiZSBjaGVja2VkISI7CiAgICAgIH0gZWxzZSBpZiAoZmxhZ2dlZCA+IDEpIHsKICAgICAgICByZXR1cm4gIiIuY29uY2F0KGZsYWdnZWQsICIgYm94ZXMgbmVlZCB0byBiZSBjaGVja2VkISIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiQWxsIGJveGVzIGFyZSBlbXB0eSEiOwogICAgICB9CiAgICB9LAogICAgb3ZlcnZpZXdJY29uOiBmdW5jdGlvbiBvdmVydmlld0ljb24oKSB7CiAgICAgIGlmICh0aGlzLnJlY2FwICE9PSAiQWxsIGJveGVzIGFyZSBlbXB0eSEiKSB7CiAgICAgICAgcmV0dXJuIFsnZmFsJywgJ21haWwtYnVsayddOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbJ2ZhbCcsICdjaGVjay1jaXJjbGUnXTsKICAgICAgfQogICAgfSwKICAgIGFsZXJ0czogZnVuY3Rpb24gYWxlcnRzKCkgewogICAgICByZXR1cm4gQWxlcnQucXVlcnkoKS53aXRoKCdib3gnKS5hbGwoKTsKICAgIH0sCiAgICBkZWxpdmVyeTogZnVuY3Rpb24gZGVsaXZlcnkoKSB7CiAgICAgIHJldHVybiBVc2VyLnF1ZXJ5KCkud2l0aCgnYm94ZXMnKS5hbGwoKVswXS5kZWxpdmVyeVNlcnZpY2U7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgIF90aGlzLm5vdyA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICAgIHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5ub3cgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpOwogICAgICB9LCAxMDAwKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AAEA,OAAA,IAAA,MAAA,sBAAA;AACA,OAAA,YAAA,MAAA,4BAAA;AACA,OAAA,GAAA,MAAA,qBAAA;AACA,OAAA,KAAA,MAAA,uBAAA;AACA,OAAA,SAAA,MAAA,yBAAA;AACA,OAAA,OAAA,MAAA,uBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA,OAAA;AAAA,IAAA,SAAA,EAAA,SAAA;AAAA,IAAA,YAAA,EAAA;AAAA,GAFA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,GAAA,EAAA;AADA,KAAA;AAGA,GAPA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,aAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,OAAA,EAAA,GAAA,GAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,SAJA,uBAIA;AACA,UAAA,GAAA,GAAA,GAAA,CAAA,KAAA,GAAA,KAAA,CAAA,YAAA,EAAA,KAAA,IAAA,CAAA,KAAA,EAAA,OAAA,CAAA,aAAA,EAAA,MAAA,EAAA,GAAA,GAAA,CAAA,CAAA;;AACA,UAAA,GAAA,EAAA;AACA,eAAA,GAAA,CAAA,WAAA;AACA,OAFA,MAEA;AACA,eAAA,CAAA;AACA;AACA,KAXA;AAYA,IAAA,KAZA,mBAYA;AACA,aAAA,GAAA,CAAA,KAAA,GAAA,KAAA,CAAA,YAAA,EAAA,KAAA,IAAA,CAAA,KAAA,EAAA,GAAA,EAAA;AACA,KAdA;AAeA,IAAA,KAfA,mBAeA;AACA,UAAA,OAAA,GAAA,GAAA,CAAA,KAAA,GAAA,KAAA,CAAA,MAAA,EAAA,IAAA,EAAA,KAAA,EAAA;;AACA,UAAA,OAAA,KAAA,CAAA,EAAA;AACA;AACA,OAFA,MAEA,IAAA,OAAA,GAAA,CAAA,EAAA;AACA,yBAAA,OAAA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAxBA;AAyBA,IAAA,YAzBA,0BAyBA;AACA,UAAA,KAAA,KAAA,2BAAA,EAAA;AACA,eAAA,CAAA,KAAA,EAAA,WAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,CAAA,KAAA,EAAA,cAAA,CAAA;AACA;AACA,KA/BA;AAgCA,IAAA,MAhCA,oBAgCA;AACA,aAAA,KAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,EAAA,GAAA,EAAA;AACA,KAlCA;AAmCA,IAAA,QAnCA,sBAmCA;AACA,aAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,OAAA,EAAA,GAAA,GAAA,CAAA,EAAA,eAAA;AACA;AArCA,GARA;AA+CA,EAAA,OA/CA,qBA+CA;AAAA;;AACA,SAAA,SAAA,CAAA,YAAA;AACA,MAAA,KAAA,CAAA,GAAA,GAAA,IAAA,IAAA,GAAA,kBAAA,EAAA;AACA,MAAA,WAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,GAAA,GAAA,IAAA,IAAA,GAAA,kBAAA,EAAA;AACA,OAFA,EAEA,IAFA,CAAA;AAGA,KALA;AAMA;AAtDA,CAAA","sourcesContent":["<template>\n  <div id=\"home\" v-if=\"!delivery\">\n    <div id=\"header\">\n      <h1>Hi {{user.firstName}}!</h1>\n      <h5><font-awesome-icon :icon=\"['fal', 'clock']\"/> {{now}}</h5>\n    </div>\n    <OverviewCard>\n      <font-awesome-icon class=\"icon\" :icon=\"overviewIcon\"/>\n      <h1>{{recap}}</h1>\n      <h2>You checked your mail <timeago :datetime=\"lastCheck\"/></h2>\n    </OverviewCard>\n    <div v-if=\"alerts.length\">\n      <h2 class=\"separator\"><font-awesome-icon :icon=\"['fal', 'bell']\"/> Alerts</h2>\n      <ul class=\"card_list\">\n        <AlertCard v-for=\"alert in alerts\" :key=\"alert.id\" :alert=\"alert\"/>\n      </ul>\n    </div>\n    <h2 class=\"separator\"><font-awesome-icon :icon=\"['fal', 'mail-bulk']\"/> Boxes</h2>\n    <ul class=\"card_list\">\n      <BoxCard v-for=\"box in boxes\" :key=\"box.id\" :box=\"box\"/>\n      <li id=\"add_box\"></li>\n    </ul>\n  </div>\n  <div id=\"tap\" v-else>\n    <div id=\"action_button\">\n      <div>\n        <h1>TAP to start</h1>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport User from \"../store/Models/User\";\nimport OverviewCard from \"../components/OverviewCard\";\nimport Box from \"../store/Models/Box\";\nimport Alert from \"../store/Models/Alert\";\nimport AlertCard from \"../components/AlertCard\";\nimport BoxCard from \"../components/BoxCard\";\n\nexport default {\n  name: 'home',\n  components: {BoxCard, AlertCard, OverviewCard},\n  data(){\n    return ({\n      now: 0,\n    })\n  },\n  computed: {\n    user(){\n      return User.query().with('boxes').all()[0];\n    },\n    lastCheck(){\n      let box = Box.query().where('ownerEmail', this.user.email).orderBy('lastChecked', 'desc').get()[0];\n      if(box){\n        return box.lastChecked;\n      } else {\n        return 0;\n      }\n    },\n    boxes(){\n      return Box.query().where('ownerEmail', this.user.email).all();\n    },\n    recap(){\n      let flagged = Box.query().where('flag', true).count();\n      if(flagged === 1){\n        return `1 box needs to be checked!`;\n      } else if(flagged > 1){\n        return `${flagged} boxes need to be checked!`;\n      } else {\n        return `All boxes are empty!`\n      }\n    },\n    overviewIcon(){\n      if(this.recap !== `All boxes are empty!`){\n        return ['fal', 'mail-bulk'];\n      } else {\n        return ['fal', 'check-circle'];\n      }\n    },\n    alerts(){\n      return Alert.query().with('box').all();\n    },\n    delivery(){\n      return User.query().with('boxes').all()[0].deliveryService;\n    }\n  },\n  mounted() {\n    this.$nextTick(()=>{\n      this.now = new Date().toLocaleTimeString();\n      setInterval(()=>{\n        this.now = new Date().toLocaleTimeString();\n      }, 1000);\n    });\n  }\n}\n</script>\n\n<style scoped>\n.card_list{\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n#add_box{\n  border-radius: 15px;\n  margin: 30px auto 20px auto;\n  height: 10px;\n  width: 50%;\n  background: #000;\n  opacity: .05;\n}\n\n#action_button{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 100px auto;\n  width: 150px;\n  height: 150px;\n  background: #fff;\n  border-radius: 100%;\n  text-align: center;\n  cursor: pointer;\n  color: #006fff;\n  border: 1px solid #006fff;\n  animation: greenPulse 2s infinite;\n}\n\n#action_button h1{\n  font-weight: 300;\n  font-size: 1.5em;\n  margin: 0;\n}\n\n\n@keyframes greenPulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(0, 111, 255, 0.75), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n\n  70% {\n    box-shadow: 0 0 0 20px rgba(0, 111, 255, 0), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n\n  100% {\n    box-shadow: 0 0 0 0 rgba(0, 111, 255, 0), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n}\n</style>\n"],"sourceRoot":"src/views"}]}