{"remainingRequest":"/Users/corentin/Desktop/ui/node_modules/thread-loader/dist/cjs.js!/Users/corentin/Desktop/ui/node_modules/babel-loader/lib/index.js!/Users/corentin/Desktop/ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/corentin/Desktop/ui/src/socket.js","dependencies":[{"path":"/Users/corentin/Desktop/ui/src/socket.js","mtime":1580047308987},{"path":"/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGlvIGZyb20gJ3NvY2tldC5pby1jbGllbnQnOwppbXBvcnQgU2V0dGluZ3MgZnJvbSAnLi9zZXR0aW5ncyc7CmltcG9ydCBCb3ggZnJvbSAiLi9zdG9yZS9Nb2RlbHMvQm94IjsKaW1wb3J0IEFsZXJ0IGZyb20gIi4vc3RvcmUvTW9kZWxzL0FsZXJ0IjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKdmFyIHNvY2tldCA9IGlvLmNvbm5lY3QoIiIuY29uY2F0KFNldHRpbmdzLmFwaS51cmwpKTsKdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLnRva2VuOwpzb2NrZXQub24oJ2Nvbm5lY3QnLCBmdW5jdGlvbiAoKSB7CiAgc29ja2V0LmVtaXQoJ2F1dGhlbnRpY2F0ZScsIHsKICAgIHRva2VuOiB0b2tlbgogIH0pLm9uKCdhdXRoZW50aWNhdGVkJywgZnVuY3Rpb24gKCkgewogICAgc29ja2V0Lm9uKCdsb2NrJywgZnVuY3Rpb24gKGJveElkKSB7CiAgICAgIGNvbnNvbGUubG9nKCdsb2NrIScpOwogICAgICBCb3gudXBkYXRlKHsKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBpZDogYm94SWQsCiAgICAgICAgICBvcGVuOiBmYWxzZSwKICAgICAgICAgIGZsYWc6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBheGlvcy5nZXQoJ2h0dHA6Ly8xOC4xODguOTkuMTM4Ojk5OTkvc3B5Y2FtLycgKyBlbmNvZGVVUklDb21wb25lbnQoYm94SWQpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgdmFyIHBhdGggPSByZXNwb25zZS5kYXRhWzBdOwogICAgICAgICAgdmFyIGF0dGFjaG1lbnQgPSAiaHR0cDovLzE4LjE4OC45OS4xMzg6OTk5OS8iLmNvbmNhdChwYXRoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGF0dGFjaG1lbnQpOwogICAgICAgICAgQWxlcnQuaW5zZXJ0KHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIGJveElkOiBib3hJZCwKICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSwKICAgICAgICAgICAgICBhdHRhY2htZW50OiBhdHRhY2htZW50CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9LCAxNTAwMCk7CiAgICB9KTsKICB9KS5vbigndW5hdXRob3JpemVkJywgZnVuY3Rpb24gKG1zZykgewogICAgY29uc29sZS5sb2cobXNnKTsKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gImh0dHA6Ly8xOC4xODguOTkuMTM4IjsKICB9KTsKfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBlbWl0OiBmdW5jdGlvbiBlbWl0KCkgewogICAgc29ja2V0LmVtaXQuYXBwbHkoc29ja2V0LCBhcmd1bWVudHMpOwogIH0KfTs="},{"version":3,"sources":["/Users/corentin/Desktop/ui/src/socket.js"],"names":["io","Settings","Box","Alert","axios","socket","connect","api","url","token","localStorage","on","emit","boxId","console","log","update","data","id","open","flag","setTimeout","get","encodeURIComponent","then","response","path","attachment","insert","date","Date","getTime","msg","window","location","href"],"mappings":"AAAA,OAAOA,EAAP,MAAe,kBAAf;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAIC,MAAM,GAAGL,EAAE,CAACM,OAAH,WAAcL,QAAQ,CAACM,GAAT,CAAaC,GAA3B,EAAb;AACA,IAAIC,KAAK,GAAGC,YAAY,CAACD,KAAzB;AAEAJ,MAAM,CAACM,EAAP,CAAU,SAAV,EAAoB,YAAI;AACpBN,EAAAA,MAAM,CACDO,IADL,CACU,cADV,EAC0B;AAACH,IAAAA,KAAK,EAAEA;AAAR,GAD1B,EAEKE,EAFL,CAEQ,eAFR,EAEyB,YAAK;AACtBN,IAAAA,MAAM,CAACM,EAAP,CAAU,MAAV,EAAkB,UAACE,KAAD,EAAS;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAb,MAAAA,GAAG,CAACc,MAAJ,CAAW;AAACC,QAAAA,IAAI,EAAC;AACTC,UAAAA,EAAE,EAAEL,KADK;AAETM,UAAAA,IAAI,EAAE,KAFG;AAGTC,UAAAA,IAAI,EAAE;AAHG;AAAN,OAAX;AAMAC,MAAAA,UAAU,CAAC,YAAI;AACXjB,QAAAA,KAAK,CAACkB,GAAN,CAAU,sCAAsCC,kBAAkB,CAACV,KAAD,CAAlE,EAA2EW,IAA3E,CAAgF,UAACC,QAAD,EAAc;AAC1F,cAAIC,IAAI,GAAGD,QAAQ,CAACR,IAAT,CAAc,CAAd,CAAX;AACA,cAAIU,UAAU,uCAAgCD,IAAhC,CAAd;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAYY,UAAZ;AACAxB,UAAAA,KAAK,CAACyB,MAAN,CAAa;AAACX,YAAAA,IAAI,EAAC;AACXJ,cAAAA,KAAK,EAAEA,KADI;AAEXgB,cAAAA,IAAI,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAFK;AAGXJ,cAAAA,UAAU,EAAEA;AAHD;AAAN,WAAb;AAKH,SATD;AAUH,OAXS,EAWP,KAXO,CAAV;AAYH,KApBD;AAqBH,GAxBL,EAyBKhB,EAzBL,CAyBQ,cAzBR,EAyBwB,UAACqB,GAAD,EAAS;AACzBlB,IAAAA,OAAO,CAACC,GAAR,CAAYiB,GAAZ;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,sBAAvB;AACH,GA5BL;AA6BH,CA9BD;AAgCA,eAAe;AACXvB,EAAAA,IAAI,EAAE,gBAAW;AAACP,IAAAA,MAAM,CAACO,IAAP,OAAAP,MAAM,YAAN;AAAqB;AAD5B,CAAf","sourcesContent":["import io from 'socket.io-client';\nimport Settings from './settings';\nimport Box from \"./store/Models/Box\";\nimport Alert from \"./store/Models/Alert\";\nimport axios from 'axios';\n\nlet socket = io.connect(`${Settings.api.url}`);\nlet token = localStorage.token;\n\nsocket.on('connect',()=>{\n    socket\n        .emit('authenticate', {token: token})\n        .on('authenticated', ()=> {\n            socket.on('lock', (boxId)=>{\n                console.log('lock!');\n                Box.update({data:{\n                        id: boxId,\n                        open: false,\n                        flag: true\n                }});\n\n                setTimeout(()=>{\n                    axios.get('http://18.188.99.138:9999/spycam/' + encodeURIComponent(boxId)).then((response) => {\n                        let path = response.data[0];\n                        let attachment = `http://18.188.99.138:9999/${path}`;\n                        console.log(attachment);\n                        Alert.insert({data:{\n                                boxId: boxId,\n                                date: new Date().getTime(),\n                                attachment: attachment\n                            }});\n                    });\n                }, 15000);\n            });\n        })\n        .on('unauthorized', (msg) => {\n            console.log(msg);\n            window.location.href = \"http://18.188.99.138\";\n        });\n});\n\nexport default {\n    emit: (...args)=>{socket.emit(...args)}\n}\n"]}]}