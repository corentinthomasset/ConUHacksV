{"remainingRequest":"/Users/corentin/Desktop/ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/corentin/Desktop/ui/src/views/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/corentin/Desktop/ui/src/views/Home.vue","mtime":1580046550442},{"path":"/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/corentin/Desktop/ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwoKaW1wb3J0IFVzZXIgZnJvbSAiLi4vc3RvcmUvTW9kZWxzL1VzZXIiOwppbXBvcnQgT3ZlcnZpZXdDYXJkIGZyb20gIi4uL2NvbXBvbmVudHMvT3ZlcnZpZXdDYXJkIjsKaW1wb3J0IEJveCBmcm9tICIuLi9zdG9yZS9Nb2RlbHMvQm94IjsKaW1wb3J0IEFsZXJ0IGZyb20gIi4uL3N0b3JlL01vZGVscy9BbGVydCI7CmltcG9ydCBBbGVydENhcmQgZnJvbSAiLi4vY29tcG9uZW50cy9BbGVydENhcmQiOwppbXBvcnQgQm94Q2FyZCBmcm9tICIuLi9jb21wb25lbnRzL0JveENhcmQiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdob21lJywKICBjb21wb25lbnRzOiB7Qm94Q2FyZCwgQWxlcnRDYXJkLCBPdmVydmlld0NhcmR9LAogIGRhdGEoKXsKICAgIHJldHVybiAoewogICAgICBub3c6IDAsCiAgICB9KQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHVzZXIoKXsKICAgICAgcmV0dXJuIFVzZXIucXVlcnkoKS53aXRoKCdib3hlcycpLmFsbCgpWzBdOwogICAgfSwKICAgIGxhc3RDaGVjaygpewogICAgICBsZXQgYm94ID0gQm94LnF1ZXJ5KCkud2hlcmUoJ293bmVyRW1haWwnLCB0aGlzLnVzZXIuZW1haWwpLm9yZGVyQnkoJ2xhc3RDaGVja2VkJywgJ2Rlc2MnKS5nZXQoKVswXTsKICAgICAgaWYoYm94KXsKICAgICAgICByZXR1cm4gYm94Lmxhc3RDaGVja2VkOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAwOwogICAgICB9CiAgICB9LAogICAgYm94ZXMoKXsKICAgICAgcmV0dXJuIEJveC5xdWVyeSgpLndoZXJlKCdvd25lckVtYWlsJywgdGhpcy51c2VyLmVtYWlsKS5hbGwoKTsKICAgIH0sCiAgICByZWNhcCgpewogICAgICBsZXQgZmxhZ2dlZCA9IEJveC5xdWVyeSgpLndoZXJlKCdmbGFnJywgdHJ1ZSkuY291bnQoKTsKICAgICAgaWYoZmxhZ2dlZCA9PT0gMSl7CiAgICAgICAgcmV0dXJuIGAxIGJveCBuZWVkcyB0byBiZSBjaGVja2VkIWA7CiAgICAgIH0gZWxzZSBpZihmbGFnZ2VkID4gMSl7CiAgICAgICAgcmV0dXJuIGAke2ZsYWdnZWR9IGJveGVzIG5lZWQgdG8gYmUgY2hlY2tlZCFgOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBgQWxsIGJveGVzIGFyZSBlbXB0eSFgCiAgICAgIH0KICAgIH0sCiAgICBvdmVydmlld0ljb24oKXsKICAgICAgaWYodGhpcy5yZWNhcCAhPT0gYEFsbCBib3hlcyBhcmUgZW1wdHkhYCl7CiAgICAgICAgcmV0dXJuIFsnZmFsJywgJ21haWwtYnVsayddOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbJ2ZhbCcsICdjaGVjay1jaXJjbGUnXTsKICAgICAgfQogICAgfSwKICAgIGFsZXJ0cygpewogICAgICByZXR1cm4gQWxlcnQucXVlcnkoKS53aXRoKCdib3gnKS5hbGwoKTsKICAgIH0sCiAgICBkZWxpdmVyeSgpewogICAgICByZXR1cm4gVXNlci5xdWVyeSgpLndpdGgoJ2JveGVzJykuYWxsKClbMF0uZGVsaXZlcnlTZXJ2aWNlOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpPT57CiAgICAgIHRoaXMubm93ID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTsKICAgICAgc2V0SW50ZXJ2YWwoKCk9PnsKICAgICAgICB0aGlzLm5vdyA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7CiAgICAgIH0sIDEwMDApOwogICAgfSk7CiAgfQp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"home\" v-if=\"!delivery\">\n    <div id=\"header\">\n      <h1>Hi {{user.firstName}}!</h1>\n      <h5><font-awesome-icon :icon=\"['fal', 'clock']\"/> {{now}}</h5>\n    </div>\n    <OverviewCard>\n      <font-awesome-icon class=\"icon\" :icon=\"overviewIcon\"/>\n      <h1>{{recap}}</h1>\n      <h2>You checked your mail <timeago :datetime=\"lastCheck\"/></h2>\n    </OverviewCard>\n    <div v-if=\"alerts.length\">\n      <h2 class=\"separator\"><font-awesome-icon :icon=\"['fal', 'bell']\"/> Alerts</h2>\n      <ul class=\"card_list\">\n        <AlertCard v-for=\"alert in alerts\" :key=\"alert.id\" :alert=\"alert\"/>\n      </ul>\n    </div>\n    <h2 class=\"separator\"><font-awesome-icon :icon=\"['fal', 'mail-bulk']\"/> Boxes</h2>\n    <ul class=\"card_list\">\n      <BoxCard v-for=\"box in boxes\" :key=\"box.id\" :box=\"box\"/>\n      <li id=\"add_box\"></li>\n    </ul>\n  </div>\n  <div id=\"tap\" v-else>\n    <div id=\"action_button\">\n      <div>\n        <h1>TAP to start</h1>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport User from \"../store/Models/User\";\nimport OverviewCard from \"../components/OverviewCard\";\nimport Box from \"../store/Models/Box\";\nimport Alert from \"../store/Models/Alert\";\nimport AlertCard from \"../components/AlertCard\";\nimport BoxCard from \"../components/BoxCard\";\n\nexport default {\n  name: 'home',\n  components: {BoxCard, AlertCard, OverviewCard},\n  data(){\n    return ({\n      now: 0,\n    })\n  },\n  computed: {\n    user(){\n      return User.query().with('boxes').all()[0];\n    },\n    lastCheck(){\n      let box = Box.query().where('ownerEmail', this.user.email).orderBy('lastChecked', 'desc').get()[0];\n      if(box){\n        return box.lastChecked;\n      } else {\n        return 0;\n      }\n    },\n    boxes(){\n      return Box.query().where('ownerEmail', this.user.email).all();\n    },\n    recap(){\n      let flagged = Box.query().where('flag', true).count();\n      if(flagged === 1){\n        return `1 box needs to be checked!`;\n      } else if(flagged > 1){\n        return `${flagged} boxes need to be checked!`;\n      } else {\n        return `All boxes are empty!`\n      }\n    },\n    overviewIcon(){\n      if(this.recap !== `All boxes are empty!`){\n        return ['fal', 'mail-bulk'];\n      } else {\n        return ['fal', 'check-circle'];\n      }\n    },\n    alerts(){\n      return Alert.query().with('box').all();\n    },\n    delivery(){\n      return User.query().with('boxes').all()[0].deliveryService;\n    }\n  },\n  mounted() {\n    this.$nextTick(()=>{\n      this.now = new Date().toLocaleTimeString();\n      setInterval(()=>{\n        this.now = new Date().toLocaleTimeString();\n      }, 1000);\n    });\n  }\n}\n</script>\n\n<style scoped>\n.card_list{\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n#add_box{\n  border-radius: 15px;\n  margin: 30px auto 20px auto;\n  height: 10px;\n  width: 50%;\n  background: #000;\n  opacity: .05;\n}\n\n#action_button{\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 100px auto;\n  width: 150px;\n  height: 150px;\n  background: #fff;\n  border-radius: 100%;\n  text-align: center;\n  cursor: pointer;\n  color: #006fff;\n  border: 1px solid #006fff;\n  animation: greenPulse 2s infinite;\n}\n\n#action_button h1{\n  font-weight: 300;\n  font-size: 1.5em;\n  margin: 0;\n}\n\n\n@keyframes greenPulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(0, 111, 255, 0.75), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n\n  70% {\n    box-shadow: 0 0 0 20px rgba(0, 111, 255, 0), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n\n  100% {\n    box-shadow: 0 0 0 0 rgba(0, 111, 255, 0), 0 0 30px rgba(0, 137, 255, 0.02), 0 0 10px rgba(0, 0, 0, 0.05);\n  }\n}\n</style>\n"]}]}